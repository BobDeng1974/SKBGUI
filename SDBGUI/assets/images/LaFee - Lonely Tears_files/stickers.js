!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(e){return t[e]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";n.r(e),n.d(e,"Stickers",function(){return i});var i=function(){function t(t,n,i,o){delete e[n],1==o?Emoji.favorite.addFavoriteSticker(t,n,i):-1==o&&Emoji.favorite.deleteFavoriteSticker(t,n,i)}var e={};return{toogleFavorite:function(n,i,o){i&&i.stopPropagation();var a=Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers;if(!hasClass(n,"on")&&a.length>=Emoji.favoriteLimit&&!Emoji.favoriteLimitNoticed){var r=getLang("purchases_stickers_favorite_limit_notice").replace(/%s/,Emoji.favoriteLimit);return setTimeout(showFastBox(getLang("global_error"),r).hide,3e3),ajax.post("stickers.php",{act:"favorite_limit_noticed",value:1}),Emoji.favoriteLimitNoticed=!0,!1}var c=attr(n,"data-sticker-id"),s=attr(n,"data-hash");if(!c||!s)return!1;if(e[c])return!1;e[c]=1;var u={act:"toggle_favorite",sticker_id:c,hash:s};toggleClass(n,"on");var d=t.pbind(o,c,n);ajax.post("/stickers.php",u,{onDone:d})}}}()},function(t,e,n){"use strict";n.r(e),n.d(e,"StickersSettings",function(){return i});var i={autoplay:0,setAutoplay:function(t){this.autoplay=t},getAutoplay:function(){return i.autoplay}}},function(t,e,n){t.exports=n(4)},function(t,e,n){"use strict";n.r(e),n.d(e,"StickersAnimation",function(){return i});var i=function(){function t(t){if(window.isMVK){var e=document.createElement("script");e.onload=function(){t()},e.src="/js/cmodules/web/bodymovin.js",document.head.appendChild(e)}else stManager.add([jsc("web/bodymovin.js")],function(){t()})}function e(t){var e=n(t),i=1;if(e){hasClass(t,"animation_play")||(hide(geByClass1("sticker_img",t)),addClass(t,"animation_play")),e.play();var o=attr(t,"data-loop-count");o=parseInt(o),isNaN(o)&&(o=3),-1!==o&&(!e._cbs.loopComplete||e._cbs.loopComplete&&0===e._cbs.loopComplete.length)&&e.addEventListener("loopComplete",function a(n){i++;var r=!0;if(o>=i&&(r=!1),r){var c=attr(t,"data-uniq-id");m[c]=0,""!==e._cbs.loopComplete&&e.removeEventListener("loopComplete",a),e.stop()}})}}function n(t){var e=attr(t,"data-uniq-id");if(!geByClass1("svg_sticker_animation",t))return m[e]&&(m[e]=0),!1;var n=u[e];return n?n:!1}function o(t,e){var i=n(t);if(i)return void("function"==typeof e&&e(i));var o=attr(t,"data-uniq-id");if(!m[o]){m[o]=1;var r=attr(t,"data-animation-path"),c=attr(t,"data-sticker-id"),d=!1;if(c&&(d=s[c]?a(t):r&&a(t)),d){var l={container:t,renderer:"svg",loop:!0,autoplay:!1,name:o,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:"svg_sticker_animation"}};s[c]?l.animationData=s[c]:l.path=r;var f=geByClass1("svg_sticker_animation",t);if(f&&re(f),i=bodymovin.loadAnimation(l),!s[c])return void i.addEventListener("data_ready",function(){s[c]=i.animationData,u[o]=i,"function"==typeof e&&e(i)})}"function"==typeof e&&(u[o]=i,"function"==typeof e&&e(i))}}function a(t){var e=t.getBoundingClientRect().top,n=t.getBoundingClientRect().bottom,i=e<window.innerHeight&&n>=0;return i&&isVisible(t)}var r=!1,c=!1,s={},u={},d={},l=void 0,f=500,m={};return{checkSettingsAndLoadInWeb:function(t){if(StickersSettings.getAutoplay()){var e=ge("fc_msg"+t),n=geByClass1("sticker_animation",e);i.loadAndPlaySticker(n)}},checkSettingsAndLoad:function(t,e,n){StickersSettings.getAutoplay()&&(n?i.loadStickerInMvkIMAndPlay(t,e):(t.textFull||t.text).indexOf("sticker_animation",0)&&i.loadStickerInMvkIMAndPlay(t.id,e))},loadStickerInMvkIMAndPlay:function(t,e){var n="_msg"+t;e&&(n="msg_id_"+t);var o=geByClass1("sticker_animation",geByClass1(n));i.loadAndPlayStickerWithTimer(o,500)},loadAutoplayAnimationStickers:function(n){if("undefined"==typeof bodymovin)return void t(function(){i.loadAutoplayAnimationStickers()});if(n){if(c)return;c=!0}if(!r){r=!0;var a=geByClass("sticker_animation_autoplay");a&&each(a,function(t,n){o(n,function(){e(n)})}),r=!1}},loadAndPlaySticker:function(n){return n?"undefined"==typeof bodymovin?(t(function(){i.loadAndPlaySticker(n)}),""):void o(n,function(){e(n)}):void 0},loadAndPlayStickerWithTimer:function(t,e){if(t&&!d[t]){e||(e=1e3);var n=ge(t);hasClass(n,"sticker_animation_disabled_timer")||(d[t]=setTimeout(function(){(n||(n=ge(t),!hasClass(n,"sticker_animation_disabled_timer")))&&(i.loadAndPlaySticker(n),clearTimeout(d[t]),d[t]=!1)},e))}},reloadStickers:function(){u={}},touchStartSticker:function(t){window.oncontextmenu||(window.oncontextmenu=function(t){return t.preventDefault(),t.stopPropagation(),window.oncontextmenu=null,!1}),l=setTimeout(function(){i.loadAndPlaySticker(t)},f)},touchEndSticker:function(){l&&clearTimeout(l)}}}()},function(t,e,n){"use strict";n.r(e);var i=n(3),o=n(1),a=n(0);window.StickersAnimation=i.StickersAnimation,window.StickersSettings=o.StickersSettings,window.Stickers=a.Stickers;try{stManager.done(jsc("web/stickers.js"))}catch(r){}}]);